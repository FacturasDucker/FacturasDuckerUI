<div class="w-full">
  <!-- Step Headers -->
  <div class="flex justify-between ">
    @for (step of steps; track step.value; let i = $index; let last = $last) {
      <div class="flex flex-col items-center relative">
        <!-- Horizontal Connector Line -->
        @if (!last) {
          <div class="absolute w-full h-[1px] bg-gray-300 top-4 left-1/2 z-0" style="width: calc(200% - 2rem);">
            <div 
              class="h-full transition-all duration-300 bg-[#FC7516]" 
              [style.width]="isCompleted(step.value) ? '100%' : '0%'">
            </div>
          </div>
        }
        
        <!-- Step Circle -->
        <div 
          [class]="isActive(step.value) ? 'bg-[#FC7516] text-white' : 
                  isCompleted(step.value) ? 'bg-white text-[#FC7516] border-[#FC7516]' : 
                  'bg-white text-gray-500 border-gray-300'"
          class="w-8 h-8 rounded-full flex items-center justify-center cursor-pointer transition-all duration-200 border z-10 text-sm"
          (click)="activateStep(step.value)">
          {{ step.value }}
        </div>
        
        <!-- Step Header Text -->
        <div 
          class="mt-2 text-xs font-medium whitespace-nowrap max-w-32 text-center"
          [class]="isActive(step.value) ? 'text-black font-semibold' : 
                   isCompleted(step.value) ? 'text-black' : 'text-gray-500'">
          {{ step.header }}
        </div>
      </div>
    }
  </div>
  
  <!-- Step Content -->
  <div class="mt-6">
    @for (step of steps; track step.value) {
      @if (isActive(step.value)) {
        <div class="flex flex-col">
          <!-- Content Area -->
          <div class="min-h-48 flex  font-medium flex-col w-full">
            @if (hasCustomContent(step.value)) {
              <!-- Renderiza contenido personalizado -->
              <ng-container 
                [ngTemplateOutlet]="getContentTemplate(step.value)!">
              </ng-container>
            } @else {
              <!-- Contenido predeterminado simple -->
              {{ step.content }}
            }
          </div>
          
          <!-- Navigation Buttons -->
          <div class="flex pt-6 gap-4 mt-4" 
               [class]="step.value === 1 ? 'justify-between' : 
                        step.value === steps.length ? 'justify-between' : 
                        'justify-between'">
            
            <!-- Back Button -->
            @if (step.value > 0) {
              <button
                class="flex items-center px-6 py-2 border border-red-500 text-red-500 rounded hover:bg-red-50 transition-colors"
                (click)="activateStep(step.value - 1)">
                Regresar
              </button>
            } @else {
              <div></div> <!-- Espacio vacÃ­o para mantener el justify-between -->
            }
            
            <!-- Action Buttons on the right -->
            <div class="flex gap-2">
              <!-- Next Button -->
              @if (step.value < steps.length) {
                <button
                  class="flex items-center px-6 py-2 bg-[#FC7516] text-white rounded hover:bg-[#e56b13] transition-colors"
                  (click)="activateStep(step.value + 1)">
                  Continuar
                </button>
              } @else {
                <button
                  class="flex items-center px-6 py-2 bg-[#FC7516] text-white rounded hover:bg-[#e56b13] transition-colors"
                  (click)="onComplete()">
                  Continuar
                </button>
              }
            </div>
          </div>
        </div>
      }
    }
  </div>
</div>